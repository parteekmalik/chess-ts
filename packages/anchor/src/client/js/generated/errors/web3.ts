/**
 * This code was AUTOGENERATED using the codama library.
 * Please DO NOT EDIT THIS FILE, instead use visitors
 * to add features, then rerun codama to update it.
 *
 * @see https://github.com/codama-idl/codama
 */

import type { Address, SOLANA_ERROR__INSTRUCTION_ERROR__CUSTOM, SolanaError } from "gill";
import { isProgramError } from "gill";

import { WEB3_PROGRAM_ADDRESS } from "../programs";

/** NotReachable: This is not supposed to be reachable */
export const WEB3_ERROR__NOT_REACHABLE = 0x1770; // 6000
/** MatchAlreadyFull: Match is already full */
export const WEB3_ERROR__MATCH_ALREADY_FULL = 0x1771; // 6001
/** IllegalMove: Illegal move */
export const WEB3_ERROR__ILLEGAL_MOVE = 0x1772; // 6002
/** MatchNotActiveOrFinished: Match is not active or finished */
export const WEB3_ERROR__MATCH_NOT_ACTIVE_OR_FINISHED = 0x1773; // 6003
/** MatchNotStarted: Match is not started */
export const WEB3_ERROR__MATCH_NOT_STARTED = 0x1774; // 6004
/** NotYourTurn: It's not your turn */
export const WEB3_ERROR__NOT_YOUR_TURN = 0x1775; // 6005
/** InvalidProfileSent: Invalid profile sent not mached with player */
export const WEB3_ERROR__INVALID_PROFILE_SENT = 0x1776; // 6006
/** MatchTimeOut: Match time out */
export const WEB3_ERROR__MATCH_TIME_OUT = 0x1777; // 6007
/** MatchAbandoned: Match abandoned */
export const WEB3_ERROR__MATCH_ABANDONED = 0x1778; // 6008

export type Web3Error =
  | typeof WEB3_ERROR__ILLEGAL_MOVE
  | typeof WEB3_ERROR__INVALID_PROFILE_SENT
  | typeof WEB3_ERROR__MATCH_ABANDONED
  | typeof WEB3_ERROR__MATCH_ALREADY_FULL
  | typeof WEB3_ERROR__MATCH_NOT_ACTIVE_OR_FINISHED
  | typeof WEB3_ERROR__MATCH_NOT_STARTED
  | typeof WEB3_ERROR__MATCH_TIME_OUT
  | typeof WEB3_ERROR__NOT_REACHABLE
  | typeof WEB3_ERROR__NOT_YOUR_TURN;

let web3ErrorMessages: Record<Web3Error, string> | undefined;
if (process.env.NODE_ENV !== "production") {
  web3ErrorMessages = {
    [WEB3_ERROR__ILLEGAL_MOVE]: `Illegal move`,
    [WEB3_ERROR__INVALID_PROFILE_SENT]: `Invalid profile sent not mached with player`,
    [WEB3_ERROR__MATCH_ABANDONED]: `Match abandoned`,
    [WEB3_ERROR__MATCH_ALREADY_FULL]: `Match is already full`,
    [WEB3_ERROR__MATCH_NOT_ACTIVE_OR_FINISHED]: `Match is not active or finished`,
    [WEB3_ERROR__MATCH_NOT_STARTED]: `Match is not started`,
    [WEB3_ERROR__MATCH_TIME_OUT]: `Match time out`,
    [WEB3_ERROR__NOT_REACHABLE]: `This is not supposed to be reachable`,
    [WEB3_ERROR__NOT_YOUR_TURN]: `It's not your turn`,
  };
}

export function getWeb3ErrorMessage(code: Web3Error): string {
  if (process.env.NODE_ENV !== "production") {
    return web3ErrorMessages![code];
  }

  return "Error message not available in production bundles.";
}

export function isWeb3Error<TProgramErrorCode extends Web3Error>(
  error: unknown,
  transactionMessage: {
    instructions: Record<number, { programAddress: Address }>;
  },
  code?: TProgramErrorCode,
): error is SolanaError<typeof SOLANA_ERROR__INSTRUCTION_ERROR__CUSTOM> & Readonly<{ context: Readonly<{ code: TProgramErrorCode }> }> {
  return isProgramError<TProgramErrorCode>(error, transactionMessage, WEB3_PROGRAM_ADDRESS, code);
}
